# redb.MSSql.Pro - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

## üìö –û–ë–ó–û–†

–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ Pro –≤–µ—Ä—Å–∏–∏ redb –¥–ª—è Microsoft SQL Server.

---

## ‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ï–°–ö–û–ï –ó–ê–ú–ï–ß–ê–ù–ò–ï

**–ü–†–û–ë–õ–ï–ú–ê:** –ë–∞–∑–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç `redb.MSSql` **–ü–†–ê–ö–¢–ò–ß–ï–°–ö–ò –ü–£–°–¢–û–ô!**

–ü—Ä–µ–∂–¥–µ —á–µ–º –¥–µ–ª–∞—Ç—å Pro –≤–µ—Ä—Å–∏—é, –Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –±–∞–∑–æ–≤—ã–π redb.MSSql:
- SQL —Å—Ö–µ–º–∞ (–æ–±–Ω–æ–≤–∏—Ç—å —É—Å—Ç–∞—Ä–µ–≤—à–∏–π redbMSSQL.sql)
- C# –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã (MSSqlObjectStorageProvider, MSSqlTreeProvider –∏ –¥—Ä.)
- MSSqlDialect, MSSqlRedbContext, RedbService
- DI Extensions

**–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫:** –§–ê–ó–ê 0 (–±–∞–∑–æ–≤—ã–π redb.MSSql) ‚Üí –§–ê–ó–ê 1-6 (Pro –≤–µ—Ä—Å–∏—è)

**–û–±—â–µ–µ –≤—Ä–µ–º—è: 15-21 –¥–µ–Ω—å** (–∞ –Ω–µ 10-16 –∫–∞–∫ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–ª–æ—Å—å –∏–∑–Ω–∞—á–∞–ª—å–Ω–æ!)

–ü–æ–¥—Ä–æ–±–Ω–µ–µ: —Å–º. `IMPLEMENTATION_ROADMAP.md` ‚Üí –§–ê–ó–ê 0

---

## üìñ –î–û–ö–£–ú–ï–ù–¢–´

### üî• [SQL_MIGRATION_PLAN.md](./SQL_MIGRATION_PLAN.md) **‚Üê –ù–ê–ß–ê–¢–¨ –° –≠–¢–û–ì–û!**
**–ü–ª–∞–Ω –º–∏–≥—Ä–∞—Ü–∏–∏ SQL —Å–∫—Ä–∏–ø—Ç–æ–≤ PostgreSQL ‚Üí MSSQL**

–°–æ–¥–µ—Ä–∂–∏—Ç:
- **–≠–¢–ê–ü 1:** –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Å–Ω–æ–≤–Ω–æ–π —Å—Ö–µ–º—ã –ë–î (3-4 –¥–Ω—è)
  - –ê–Ω–∞–ª–∏–∑ —Ä–∞–∑–ª–∏—á–∏–π redbPostgre.sql vs redbMSSQL.sql
  - –í–∫–ª—é—á–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –∏–∑ 004_add_dictionary_array_support.sql
  - –°–æ–∑–¥–∞–Ω–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–Ω–æ–≥–æ redbMSSQL.sql
- **–≠–¢–ê–ü 2:** –ü–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –±–∞–∑–æ–≤—ã—Ö SQL —Ñ—É–Ω–∫—Ü–∏–π (2-3 –¥–Ω—è)
  - redb_structure_tree.sql
  - redb_json_objects.sql
  - redb_lazy_loading_search.sql
- **–≠–¢–ê–ü 3:** –ü–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Pro SQL —Ñ—É–Ω–∫—Ü–∏–π (4-5 –¥–Ω–µ–π)
  - redb_metadata_cache.sql
  - redb_projection.sql ‚Üí C# –∫–æ–¥
  - redb_aggregation.sql ‚Üí C# –∫–æ–¥
  - redb_grouping.sql ‚Üí C# –∫–æ–¥
  - redb_window.sql ‚Üí C# –∫–æ–¥
- **–≠–¢–ê–ü 4:** –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, 2-3 –¥–Ω—è)
  - redb_facets_search.sql

**‚ö†Ô∏è –í–ê–ñ–ù–û:** –ò–∑–º–µ–Ω–µ–Ω–∏—è –∏–∑ 004_add_dictionary_array_support.sql –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å **–°–†–ê–ó–£** –≤ –æ—Å–Ω–æ–≤–Ω–æ–º —Ñ–∞–π–ª–µ redbMSSQL.sql!

**–≠—Ç–æ –æ—Å–Ω–æ–≤–Ω–æ–π –ø–ª–∞–Ω —Ä–∞–±–æ—Ç—ã - –Ω–∞—á–Ω–∏—Ç–µ –∏–º–µ–Ω–Ω–æ —Å –Ω–µ–≥–æ!**

---

### üéØ [MSSQL_PRO_IMPLEMENTATION_PLAN.md](./MSSQL_PRO_IMPLEMENTATION_PLAN.md)
**–û–±—â–∏–π –ø–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ Pro –≤–µ—Ä—Å–∏–∏**

–°–æ–¥–µ—Ä–∂–∏—Ç:
- –¶–µ–ª—å –ø—Ä–æ–µ–∫—Ç–∞
- –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ MSSQL
- –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ Pro –≤–µ—Ä—Å–∏–∏
- –î–µ—Ç–∞–ª—å–Ω—ã–π –ø–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ (6 —ç—Ç–∞–ø–æ–≤)
- –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤ –ø—Ä–æ–µ–∫—Ç–∞
- –ö–ª—é—á–µ–≤—ã–µ –æ—Ç–ª–∏—á–∏—è MSSQL –æ—Ç PostgreSQL
- **–û—Ü–µ–Ω–∫–∞ –≤—Ä–µ–º–µ–Ω–∏: 15-21 –¥–µ–Ω—å** (–≤–∫–ª—é—á–∞—è –§–ê–ó–£ 0 - –±–∞–∑–æ–≤—ã–π redb.MSSql!)

**–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–∞–∫ –æ–±—â–∏–π –æ–±–∑–æ—Ä –ø–æ—Å–ª–µ SQL –º–∏–≥—Ä–∞—Ü–∏–∏**

---

### üîß [SQL_SCRIPTS_DETAILED.md](./SQL_SCRIPTS_DETAILED.md)
**–î–µ—Ç–∞–ª—å–Ω—ã–µ SQL —Å–∫—Ä–∏–ø—Ç—ã**

–°–æ–¥–µ—Ä–∂–∏—Ç:
- **1. –¢–∞–±–ª–∏—Ü–∞ –º–∏–≥—Ä–∞—Ü–∏–π** (`_migrations`)
  - –ü–æ–ª–Ω—ã–π SQL —Å–∫—Ä–∏–ø—Ç
  - –ò–Ω–¥–µ–∫—Å—ã
  - –í–Ω–µ—à–Ω–∏–µ –∫–ª—é—á–∏
  - –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏
  - –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
  
- **2. –ö–µ—à –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö —Å—Ö–µ–º** (`_scheme_metadata_cache`)
  - –î–µ–Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π –∫–µ—à –¥–ª—è PVT
  - –ë—ã—Å—Ç—Ä—ã–π –ø–æ–∏—Å–∫ –ø–æ–ª–µ–π
  - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö Dictionary
  
- **3. Table-Valued Parameter —Ç–∏–ø—ã**
  - `BigIntListType` - —Å–ø–∏—Å–∫–∏ ID
  - `StringListType` - —Å–ø–∏—Å–∫–∏ —Å—Ç—Ä–æ–∫
  - `GuidListType` - —Å–ø–∏—Å–∫–∏ GUID
  - `StructureFieldPairType` - –¥–ª—è PVT
  - `ObjectSchemeType` - –¥–ª—è batch –æ–ø–µ—Ä–∞—Ü–∏–π
  - –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ C#
  
- **4. –•—Ä–∞–Ω–∏–º—ã–µ –ø—Ä–æ—Ü–µ–¥—É—Ä—ã PVT**
  - `sp_GetObjectBase`
  - `sp_GetObjectValues`
  - `sp_GetObjectValuesBatch`
  - `sp_GetListItemsBatch`
  - `sp_GetObjectsBatch`
  - `sp_MaterializeObject`

**–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–∞–∫ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –ø—Ä–∏ –Ω–∞–ø–∏—Å–∞–Ω–∏–∏ SQL!**

---

### üîÑ [SQL_DIALECT_COMPARISON.md](./SQL_DIALECT_COMPARISON.md)
**–°—Ä–∞–≤–Ω–µ–Ω–∏–µ PostgreSQL –∏ MS SQL Server**

–°–æ–¥–µ—Ä–∂–∏—Ç:
- **1. –ë–∞–∑–æ–≤—ã–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å**
  - CREATE TABLE
  - LIMIT / TOP / OFFSET
  - RETURNING / OUTPUT
  
- **2. –ü–∞—Ä–∞–º–µ—Ç—Ä—ã**
  - –ü–æ–∑–∏—Ü–∏–æ–Ω–Ω—ã–µ ($1, $2) vs –ò–º–µ–Ω–æ–≤–∞–Ω–Ω—ã–µ (@p0, @p1)
  - IN clause —Å –º–∞—Å—Å–∏–≤–∞–º–∏
  
- **3. –¢–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö**
  - –ü–æ–ª–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ –º–∞–ø–ø–∏–Ω–≥–∞
  - –ü—Ä–∏–º–µ—Ä—ã –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–π
  
- **4. –§—É–Ω–∫—Ü–∏–∏ –∏ –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã**
  - –°—Ç—Ä–æ–∫–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
  - –ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏
  - –î–∞—Ç–∞/–≤—Ä–µ–º—è —Ñ—É–Ω–∫—Ü–∏–∏
  - –ê–≥—Ä–µ–≥–∞—Ç–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
  
- **5. Window Functions**
  - –ü–æ–ª–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å (SQL 2012+)
  
- **6. CTE**
  - –û–±—ã—á–Ω—ã–µ CTE
  - –†–µ–∫—É—Ä—Å–∏–≤–Ω—ã–µ CTE
  
- **7. PVT –æ–ø–µ—Ä–∞—Ü–∏–∏**
  - PostgreSQL: crosstab / FILTER
  - MSSQL: PVT / CASE WHEN
  - –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è redb
  
- **8. –ú–∞—Å—Å–∏–≤—ã –∏ —Å–ø–∏—Å–∫–∏**
  - PostgreSQL: –Ω–∞—Ç–∏–≤–Ω—ã–µ –º–∞—Å—Å–∏–≤—ã
  - MSSQL: —ç–º—É–ª—è—Ü–∏—è —á–µ—Ä–µ–∑ JSON, TVP, —Ç–∞–±–ª–∏—Ü—ã
  
- **9. JSON –æ–ø–µ—Ä–∞—Ü–∏–∏**
  - PostgreSQL: JSONB
  - MSSQL: JSON —Ñ—É–Ω–∫—Ü–∏–∏ (SQL 2016+)
  
- **10. –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏**
  - –£—Ä–æ–≤–Ω–∏ –∏–∑–æ–ª—è—Ü–∏–∏
  - –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∏

**–¢–∞–±–ª–∏—Ü–∞ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏: 95% –¥–ª—è –±–∞–∑–æ–≤—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π**

**–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—Ä–∏ –ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –∫–æ–¥–∞ —Å PostgreSQL!**

---

### üó∫Ô∏è [IMPLEMENTATION_ROADMAP.md](./IMPLEMENTATION_ROADMAP.md)
**–ü–æ—à–∞–≥–æ–≤—ã–π –ø–ª–∞–Ω —Ä–∞–±–æ—Ç—ã**

–°–æ–¥–µ—Ä–∂–∏—Ç:
- **–ü–ª–∞–Ω –Ω–∞ 15-21 –¥–µ–Ω—å** (–§–ê–ó–ê 0 + 6 —Ñ–∞–∑ Pro)
- **–§–∞–∑–∞ 1:** SQL –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (2-3 –¥–Ω—è)
- **–§–∞–∑–∞ 2:** –ë–∞–∑–æ–≤—ã–µ –ü—Ä–æ–≤–∞–π–¥–µ—Ä—ã (3-4 –¥–Ω—è)
- **–§–∞–∑–∞ 3:** Query –ü—Ä–æ–≤–∞–π–¥–µ—Ä—ã (4-5 –¥–Ω–µ–π)
- **–§–∞–∑–∞ 4:** Tree Query –ü—Ä–æ–≤–∞–π–¥–µ—Ä—ã (2-3 –¥–Ω—è)
- **–§–∞–∑–∞ 5:** –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (1-2 –¥–Ω—è)
- **–§–∞–∑–∞ 6:** –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è (2-3 –¥–Ω—è)

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞:**
```
redb.MSSql.Pro/
‚îú‚îÄ‚îÄ sql/                    ‚Üê SQL —Å–∫—Ä–∏–ø—Ç—ã
‚îú‚îÄ‚îÄ Sql/                    ‚Üê ProMSSqlDialect
‚îú‚îÄ‚îÄ Query/                  ‚Üê Query –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã
‚îú‚îÄ‚îÄ Providers/              ‚Üê –ü—Ä–æ–≤–∞–π–¥–µ—Ä—ã –¥–∞–Ω–Ω—ã—Ö
‚îú‚îÄ‚îÄ Services/               ‚Üê ProRedbService
‚îî‚îÄ‚îÄ Extensions/             ‚Üê DI Extensions
```

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã –∑–∞–¥–∞—á:**
- **P0 (Critical):** SQL, Dialect, Basic CRUD
- **P1 (Important):** Aggregation, Grouping, Tree queries
- **P2 (Desired):** Window functions, Optimization
- **P3 (Optional):** Advanced features

**–ú–µ—Ç—Ä–∏–∫–∏ —É—Å–ø–µ—Ö–∞:**
- –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: < 100ms –¥–ª—è PVT 100 –æ–±—ä–µ–∫—Ç–æ–≤
- Test coverage: > 90%
- API —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å: 95%+

**–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–∞–∫ –ø–ª–∞–Ω —Ä–∞–±–æ—Ç—ã!**

---

## üöÄ –ë–´–°–¢–†–´–ô –°–¢–ê–†–¢

### 1. –ò–∑—É—á–∏—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã –≤ –ø–æ—Ä—è–¥–∫–µ:

1. üî• **SQL_MIGRATION_PLAN.md** - –ø–ª–∞–Ω –º–∏–≥—Ä–∞—Ü–∏–∏ SQL (–ù–ê–ß–ê–¢–¨ –° –≠–¢–û–ì–û!)
2. ‚úÖ **SQL_DIALECT_COMPARISON.md** - —Ä–∞–∑–ª–∏—á–∏—è –¥–∏–∞–ª–µ–∫—Ç–æ–≤
3. ‚úÖ **MSSQL_PRO_IMPLEMENTATION_PLAN.md** - –æ–±—â–∏–π –ø–ª–∞–Ω Pro –≤–µ—Ä—Å–∏–∏
4. ‚úÖ **SQL_SCRIPTS_DETAILED.md** - –¥–µ—Ç–∞–ª—å–Ω—ã–µ SQL —Å–∫—Ä–∏–ø—Ç—ã –¥–ª—è Pro
5. ‚úÖ **IMPLEMENTATION_ROADMAP.md** - –ø–æ—à–∞–≥–æ–≤—ã–π –ø–ª–∞–Ω C# –∫–æ–¥–∞

### 2. –°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–æ–µ–∫—Ç

```bash
cd c:\Work\redb_code\csharp\redb
dotnet new classlib -n redb.MSSql.Pro -f net9.0
dotnet sln redb.sln add redb.MSSql.Pro/redb.MSSql.Pro.csproj
```

### 3. –î–æ–±–∞–≤—å—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

```bash
cd redb.MSSql.Pro

# –ü—Ä–æ–µ–∫—Ç–Ω—ã–µ —Å—Å—ã–ª–∫–∏
dotnet add reference ../redb.Core/redb.Core.csproj
dotnet add reference ../redb.Core.Pro/redb.Core.Pro.csproj
dotnet add reference ../redb.MSSql/redb.MSSql.csproj

# NuGet –ø–∞–∫–µ—Ç—ã
dotnet add package Microsoft.EntityFrameworkCore --version 9.0.8
dotnet add package Microsoft.EntityFrameworkCore.SqlServer --version 9.0.8
dotnet add package Microsoft.Extensions.Caching.Memory --version 9.0.8
```

### 4. –°–æ–∑–¥–∞–π—Ç–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—É

```bash
mkdir sql Sql Query Providers Services Extensions
```

### 5. –ù–∞—á–Ω–∏—Ç–µ —Å –∞–Ω–∞–ª–∏–∑–∞ SQL —Å—Ö–µ–º

**–°–Ω–∞—á–∞–ª–∞ - –∞–Ω–∞–ª–∏–∑ –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Å–Ω–æ–≤–Ω–æ–π —Å—Ö–µ–º—ã –ë–î!**

1. –û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª—ã –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è:
```bash
code redb.Postgres/sql/redbPostgre.sql
code redb.MSSql/sql/redbMSSQL.sql
code redb.Postgres/sql/004_add_dictionary_array_support.sql
```

2. –°–æ–∑–¥–∞–π—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç –∞–Ω–∞–ª–∏–∑–∞:
```bash
code redb.MSSql/doc/SCHEMA_COMPARISON.md
```

3. –í—ã–ø–æ–ª–Ω–∏—Ç–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø–æ —á–µ–∫-–ª–∏—Å—Ç—É –∏–∑ **SQL_MIGRATION_PLAN.md**

4. –û–±–Ω–æ–≤–∏—Ç–µ `redb.MSSql/sql/redbMSSQL.sql` —Å —É—á–µ—Ç–æ–º –≤—Å–µ—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π

**–ü–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –æ—Å–Ω–æ–≤–Ω–æ–π —Å—Ö–µ–º—ã** - –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç–µ –∫ Pro SQL —Å–∫—Ä–∏–ø—Ç–∞–º –∏–∑ **SQL_SCRIPTS_DETAILED.md**

---

## üìä –ü–†–û–ì–†–ï–°–°

### –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å: üìù **–ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ**

- ‚úÖ –ê–Ω–∞–ª–∏–∑ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
- ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∞
- ‚úÖ –ü–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –≥–æ—Ç–æ–≤
- ‚è≠Ô∏è –ù–∞—á–∞–ª–æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ SQL —Å–∫—Ä–∏–ø—Ç–æ–≤

### –°–ª–µ–¥—É—é—â–∏–π —à–∞–≥

**1. –°–æ–∑–¥–∞—Ç—å:** `redb.MSSql/doc/SCHEMA_COMPARISON.md` - –∞–Ω–∞–ª–∏–∑ —Ä–∞–∑–ª–∏—á–∏–π —Å—Ö–µ–º

**2. –û–±–Ω–æ–≤–∏—Ç—å:** `redb.MSSql/sql/redbMSSQL.sql` - –≤–∫–ª—é—á–∏—Ç—å –≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏–∑ –º–∏–≥—Ä–∞—Ü–∏–∏ 004

**3. –ó–∞—Ç–µ–º:** –°–æ–∑–¥–∞–≤–∞—Ç—å Pro SQL —Å–∫—Ä–∏–ø—Ç—ã (migrations, metadata_cache, etc.)

---

## üéØ –ö–õ–Æ–ß–ï–í–´–ï –¶–ï–õ–ò

### Must Have (v1.0)
- ‚úÖ SQL —Å–∫—Ä–∏–ø—Ç—ã –º–∏–≥—Ä–∞—Ü–∏–π
- ‚úÖ ProMSSqlDialect
- ‚úÖ –ë–∞–∑–æ–≤—ã–µ CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏
- ‚úÖ PVT –º–∞—Ç–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è
- ‚úÖ Where, OrderBy, Skip, Take
- ‚úÖ GetChildren, GetDescendants

### Should Have (v1.1)
- ‚úÖ Aggregation (Count, Sum, Avg, Min, Max)
- ‚úÖ GroupBy, Having
- ‚úÖ Window Functions (ROW_NUMBER, RANK, LAG, LEAD)
- ‚úÖ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### Nice to Have (v2.0)
- ‚úÖ Advanced JSON support
- ‚úÖ Full-text search
- ‚úÖ –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- ‚úÖ Performance benchmarks

---

## üí° –í–ê–ñ–ù–´–ï –ó–ê–ú–ï–ß–ê–ù–ò–Ø

### –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è SQL Server
**–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è: SQL Server 2016+**
- JSON —Ñ—É–Ω–∫—Ü–∏–∏
- STRING_AGG (2017+)
- Window Functions (2012+)

### –ö–ª—é—á–µ–≤—ã–µ —Ä–∞–∑–ª–∏—á–∏—è —Å PostgreSQL
1. **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:** `$1` ‚Üí `@p0`
2. **–ú–∞—Å—Å–∏–≤—ã:** –ù–µ—Ç –Ω–∞—Ç–∏–≤–Ω–æ–π –ø–æ–¥–¥–µ—Ä–∂–∫–∏ ‚Üí TVP –∏–ª–∏ JSON
3. **PVT:** `FILTER` ‚Üí `CASE WHEN`
4. **LIMIT:** `LIMIT n` ‚Üí `TOP n` –∏–ª–∏ `OFFSET/FETCH`
5. **JSON:** `JSONB` ‚Üí `NVARCHAR(MAX)` + —Ñ—É–Ω–∫—Ü–∏–∏

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **Table-Valued Parameters** –¥–ª—è –º–∞—Å—Å–∏–≤–æ–≤
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **CASE WHEN** –¥–ª—è PVT –≤–º–µ—Å—Ç–æ FILTER
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **OFFSET/FETCH** –≤–º–µ—Å—Ç–æ TOP (SQL 2012+)
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ SQL Server 2016+ –¥–ª—è –ø–æ–ª–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏

---

## üìû –ö–û–ù–¢–ê–ö–¢–´ –ò –†–ï–°–£–†–°–´

### –†–µ—Å—É—Ä—Å—ã
- **–†–µ—Ñ–µ—Ä–µ–Ω—Å–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è:** `redb.Postgres.Pro/`
- **–ë–∞–∑–æ–≤–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è:** `redb.Core.Pro/`
- **MSSQL –±–∞–∑–∞:** `redb.MSSql/`

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Microsoft
- [SQL Server Documentation](https://docs.microsoft.com/sql/)
- [T-SQL Reference](https://docs.microsoft.com/sql/t-sql/)
- [EF Core Documentation](https://docs.microsoft.com/ef/core/)

### –ü—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞
- –í—Å–µ –ø—Ä–∏–º–µ—Ä—ã –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ö –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã
- SQL —Å–∫—Ä–∏–ø—Ç—ã –≥–æ—Ç–æ–≤—ã –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é
- C# –∫–æ–¥ —Å–æ–≤–º–µ—Å—Ç–∏–º —Å .NET 9

---

## üéâ –ì–û–¢–û–í–´ –ù–ê–ß–ê–¢–¨?

**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** –°–æ–∑–¥–∞–Ω–∏–µ SQL —Å–∫—Ä–∏–ø—Ç–æ–≤

**–ù–∞—á–Ω–∏—Ç–µ —Å:** `redb.MSSql.Pro/sql/001_migrations_table.sql`

**–£–¥–∞—á–∏!** üöÄ

---

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 26 –¥–µ–∫–∞–±—Ä—è 2024  
**–í–µ—Ä—Å–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏:** 1.0  
**–°—Ç–∞—Ç—É—Å:** –ì–æ—Ç–æ–≤ –∫ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ ‚úÖ

